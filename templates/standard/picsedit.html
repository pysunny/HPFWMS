{% extends 'base.html' %}
{% load staticfiles %}
{% block titlename %}HPFWMS-新建项目{% endblock titlename %}
{% block bodyclass %} {% endblock bodyclass %}
{% block boby %}
<div class="layui-fluid">
  <form method="post" class="layui-form">
    <div class="layui-row">
          {% csrf_token %}
          <input type="hidden" name="picid" value="{{pic.id}}">
          <div class="layui-col-xs12">
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>图元标记</label>
                <div class="layui-input-block">
                    <input type="text" id="picsname" name="picsname" placeholder="组件标记" lay-verify="required" autocomplete="off" class="layui-input" value="{{pic.name}}">
                </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>屏风种类</label>
                <div class="layui-input-block">
                    <select name="paneltype" lay-verify="required" >
                        <option value="">选择屏风种类</option>
                        <option value="0" {% if pic.paneltype == 0 %} selected="selected" {% endif %} >普通屏风</option>
                        <option value="1" {% if pic.paneltype == 1 %} selected="selected" {% endif %} >玻璃屏风(GL1)</option>
                        <option value="2" {% if pic.paneltype == 2 %} selected="selected" {% endif %} >收板间门</option>
                    </select>
                </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
              <label class="layui-form-label"><span class="x-red">*</span>图元分类</label>
                  <div class="layui-input-block">
                    <select name="pictype" lay-verify="required" >
                      <option value="">选择图元分类</option>
                      <option value="0" {% if pic.pictype == 0 %} selected="selected" {% endif %} >BP</option>
                      <option value="1" {% if pic.pictype == 1 %} selected="selected" {% endif %} >LCP</option>
                      <option value="2" {% if pic.pictype == 2 %} selected="selected" {% endif %} >BSP</option>
                      <option value="3" {% if pic.pictype == 3 %} selected="selected" {% endif %} >WJ</option>
                      <option value="4" {% if pic.pictype == 4 %} selected="selected" {% endif %} >UIPD</option>
                      <option value="5" {% if pic.pictype == 5 %} selected="selected" {% endif %} >LIPD</option>
                      <option value="6" {% if pic.pictype == 6 %} selected="selected" {% endif %} >FP</option>
                    </select>
                  </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
              <label class="layui-form-label"><span class="x-red">*</span>左边组件</label>
                <div class="layui-input-block">
                  <select name="leftside" lay-verify="required" >
                      <option value="">选择左边组件</option>
                      {% for lefts in leftside %}
                      <option value="{{ lefts.id }}" {% if pic.leftside.id == lefts.id %} selected="selected" {% endif %} >{{ lefts.name }}</option>
                      {% endfor %}
                  </select>
                </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
              <label class="layui-form-label"><span class="x-red">*</span>中间组件</label>
                <div class="layui-input-block">
                  <select name="middle" lay-verify="required" >
                      <option value="">选择中间组件</option>
                      {% for middles in middle %}
                      <option value="{{ middles.id }}" {% if pic.middle.id == middles.id %} selected="selected" {% endif %} >{{ middles.name }}</option>
                      {% endfor %}
                  </select>
                </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
              <label class="layui-form-label"><span class="x-red">*</span>轮子组件</label>
                <div class="layui-input-block">
                  <select name="wheel" lay-verify="required" >
                      <option value="">选择轮子组件</option>
                      {% for wheels in wheel %}
                      <option value="{{ wheels.id }}" {% if pic.wheel.id == wheels.id %} selected="selected" {% endif %} >{{ wheels.name }}</option>
                      {% endfor %}
                  </select>
                </div>
            </div>
          </div>
          <div class="layui-col-xs6">
            <div class="layui-form-item">
              <label class="layui-form-label"><span class="x-red">*</span>右边组件</label>
                <div class="layui-input-block">
                  <select name="rightside" lay-verify="required" >
                      <option value="">选择右边组件</option>
                      {% for rights in rightside %}
                      <option value="{{ rights.id }}" {% if pic.rightside.id == rights.id %} selected="selected" {% endif %} >{{ rights.name }}</option>
                      {% endfor %}
                  </select>
                </div>
            </div>
          </div>
          <div class="layui-form-item">
              <label class="layui-form-label"></label>
              <button class="layui-btn" lay-filter="add" lay-submit="">保存</button>
          </div>
        </div>
    </form>
</div>
{% endblock boby %}
{# 网页主体块 #}

{% block bottomfiles %}
<script>layui.use(['form', 'layer', 'jquery'],
    function () {
      $ = layui.jquery;
      var form = layui.form,
        layer = layui.layer;

      //监听提交
      form.on('submit(add)',
        function (data) {
          data.field.csrfmiddlewaretoken = $("[name='csrfmiddlewaretoken']").val()
          data.field.id = $("[name='picid']").val()
          //ajax请求
          $.post("{% url 'standard:picsedit' %}", data.field, function (data) {
            if (data.res == 2) {
              layer.alert("保存成功", {
                icon: 6
              },
                function () {
                  //关闭当前frame
                  xadmin.close();

                  // 可以对父窗口进行刷新 
                  xadmin.father_reload();
                });
            }
            else {
              // 数据验证有问题
              layer.msg(data.errmsg, {
                time: 2000, //2s后自动关闭
              });
            }

          })
          return false;
        });

    });</script>
{% endblock bottomfiles %}
{# 网页底部引入块 #}